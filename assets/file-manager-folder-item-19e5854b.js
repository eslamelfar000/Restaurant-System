import{r as d,c3 as H,j as e,A as K,ad as Q,cn as ie,c as C,I as s,c4 as X,Q as S,D as G,P as o,aG as Y,O as B,$ as ae,aw as Z,dX as te,a2 as y,S as c,N as P,co as le,x as ce,B as w,dR as _,dB as de,dY as xe,T as L,a5 as he,K as U,dT as pe,R as ue,dZ as me,c8 as je,bG as ge,w as ve}from"./index-3fa43abf.js";import{u as fe}from"./use-copy-to-clipboard-e169f751.js";import{C as Ce}from"./confirm-dialog-0016619a.js";import{L as be}from"./ListItem-f4be5365.js";import{D as J}from"./DialogTitle-5c3b66de.js";import{D as ee}from"./DialogContent-e9c84096.js";import{D as ne}from"./DialogActions-2c9e30a9.js";import{A as ye}from"./AvatarGroup-ba5c2ab9.js";function V({person:n}){const[a,x]=d.useState(n.permission),r=H(),h=d.useCallback(p=>{x(p)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(be,{sx:{px:0,py:1},children:[e.jsx(K,{alt:n.name,src:n.avatarUrl,sx:{mr:2}}),e.jsx(Q,{primary:n.name,secondary:e.jsx(ie,{title:n.email,children:e.jsx("span",{children:n.email})}),primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{noWrap:!0,component:"span"},sx:{flexGrow:1,pr:1}}),e.jsxs(C,{size:"small",color:"inherit",endIcon:e.jsx(s,{width:20,icon:r.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-1}}),onClick:r.onOpen,sx:{flexShrink:0,...r.open&&{bgcolor:"action.selected"}},children:["Can ",a]})]}),e.jsx(X,{open:r.open,onClose:r.onClose,sx:{width:160},children:e.jsxs(e.Fragment,{children:[e.jsxs(S,{selected:a==="view",onClick:()=>{r.onClose(),h("view")},children:[e.jsx(s,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(S,{selected:a==="edit",onClick:()=>{r.onClose(),h("edit")},children:[e.jsx(s,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(S,{onClick:()=>{r.onClose()},sx:{color:"error.main"},children:[e.jsx(s,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})})]})}V.propTypes={person:o.object};function $({shared:n,inviteEmail:a,onCopyLink:x,onChangeInvite:r,open:h,onClose:p,...v}){const f=n&&!!n.length;return e.jsxs(Y,{fullWidth:!0,maxWidth:"xs",open:h,onClose:p,...v,children:[e.jsx(J,{children:" Invite "}),e.jsxs(ee,{sx:{overflow:"unset"},children:[r&&e.jsx(B,{fullWidth:!0,value:a,placeholder:"Email",onChange:r,InputProps:{endAdornment:e.jsx(ae,{position:"end",children:e.jsx(C,{color:"inherit",variant:"contained",disabled:!a,sx:{mr:-.75},children:"Send Invite"})})},sx:{mb:2}}),f&&e.jsx(Z,{sx:{maxHeight:60*6},children:e.jsx(te,{disablePadding:!0,children:n.map(u=>e.jsx(V,{person:u},u.id))})})]}),e.jsxs(ne,{sx:{justifyContent:"space-between"},children:[x&&e.jsx(C,{startIcon:e.jsx(s,{icon:"eva:link-2-fill"}),onClick:x,children:"Copy link"}),p&&e.jsx(C,{variant:"outlined",color:"inherit",onClick:p,children:"Close"})]})]})}$.propTypes={inviteEmail:o.string,onChangeInvite:o.func,onClose:o.func,onCopyLink:o.func,open:o.bool,shared:o.array};function oe({item:n,open:a,favorited:x,onFavorite:r,onCopyLink:h,onClose:p,onDelete:v,...f}){const{name:u,size:b,url:I,type:k,shared:j,modifiedAt:F}=n,g=j&&!!j.length,t=y(!0),m=y(),T=y(!0),[D,A]=d.useState(""),[R,z]=d.useState(n.tags.slice(0,3)),W=d.useCallback(i=>{A(i.target.value)},[]),O=d.useCallback(i=>{z(i)},[]),M=e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Tags",e.jsx(P,{size:"small",onClick:t.onToggle,children:e.jsx(s,{icon:t.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),t.value&&e.jsx(le,{multiple:!0,freeSolo:!0,options:n.tags.map(i=>i),getOptionLabel:i=>i,defaultValue:n.tags.slice(0,3),value:R,onChange:(i,l)=>{O(l)},renderOption:(i,l)=>d.createElement("li",{...i,key:l},l),renderTags:(i,l)=>i.map((q,re)=>d.createElement(ce,{...l({index:re}),size:"small",variant:"soft",label:q,key:q})),renderInput:i=>e.jsx(B,{...i,placeholder:"#Add a tags"})})]}),N=e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Properties",e.jsx(P,{size:"small",onClick:T.onToggle,children:e.jsx(s,{icon:T.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),T.value&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(w,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Size"}),_(b)]}),e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(w,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modified"}),de(F)]}),e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(w,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Type"}),xe(k)]})]})]}),E=e.jsxs(e.Fragment,{children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(L,{variant:"subtitle2",children:" File Share With "}),e.jsx(P,{size:"small",color:"primary",onClick:m.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(s,{icon:"mingcute:add-line"})})]}),g&&e.jsx(w,{sx:{pl:2.5,pr:1},children:j.map(i=>e.jsx(V,{person:i},i.id))})]});return e.jsxs(e.Fragment,{children:[e.jsxs(he,{open:a,onClose:p,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},...f,children:[e.jsxs(Z,{sx:{height:1},children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(L,{variant:"h6",children:" Info "}),e.jsx(U,{color:"warning",icon:e.jsx(s,{icon:"eva:star-outline"}),checkedIcon:e.jsx(s,{icon:"eva:star-fill"}),checked:x,onChange:r})]}),e.jsxs(c,{spacing:2.5,justifyContent:"center",sx:{p:2.5,bgcolor:"background.neutral"},children:[e.jsx(pe,{imageView:!0,file:k==="folder"?k:I,sx:{width:64,height:64},imgSx:{borderRadius:1}}),e.jsx(L,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:u}),e.jsx(G,{sx:{borderStyle:"dashed"}}),M,N]}),E]}),e.jsx(w,{sx:{p:2.5},children:e.jsx(C,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(s,{icon:"solar:trash-bin-trash-bold"}),onClick:v,children:"Delete"})})]}),e.jsx($,{open:m.value,shared:j,inviteEmail:D,onChangeInvite:W,onCopyLink:h,onClose:()=>{m.onFalse(),A("")}})]})}oe.propTypes={favorited:o.bool,item:o.object,onClose:o.func,onCopyLink:o.func,onDelete:o.func,onFavorite:o.func,open:o.bool};function we({title:n,subTitle:a,link:x,onOpen:r,collapse:h,onCollapse:p,sx:v,...f}){return e.jsxs(c,{direction:"row",alignItems:"center",sx:{mb:3,...v},...f,children:[e.jsxs(c,{flexGrow:1,children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,flexGrow:1,children:[e.jsxs(L,{variant:"h6",children:[" ",n," "]}),e.jsx(P,{size:"small",color:"primary",onClick:r,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(s,{icon:"mingcute:add-line"})})]}),e.jsx(w,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:a})]}),x&&e.jsx(C,{href:x,component:ue,size:"small",color:"inherit",endIcon:e.jsx(s,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View All"}),p&&e.jsx(P,{onClick:p,children:e.jsx(s,{icon:h?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}we.propTypes={collapse:o.bool,link:o.string,onCollapse:o.func,onOpen:o.func,subTitle:o.string,sx:o.object,title:o.string};function se({title:n="Upload Files",open:a,onClose:x,onCreate:r,onUpdate:h,folderName:p,onChangeFolderName:v,...f}){const[u,b]=d.useState([]);d.useEffect(()=>{a||b([])},[a]);const I=d.useCallback(g=>{const t=g.map(m=>Object.assign(m,{preview:URL.createObjectURL(m)}));b([...u,...t])},[u]),k=()=>{x(),console.info("ON UPLOAD")},j=g=>{const t=u.filter(m=>m!==g);b(t)},F=()=>{b([])};return e.jsxs(Y,{fullWidth:!0,maxWidth:"sm",open:a,onClose:x,...f,children:[e.jsxs(J,{sx:{p:g=>g.spacing(3,3,2,3)},children:[" ",n," "]}),e.jsxs(ee,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(r||h)&&e.jsx(B,{fullWidth:!0,label:"Folder name",value:p,onChange:v,sx:{mb:3}}),e.jsx(me,{multiple:!0,files:u,onDrop:I,onRemove:j})]}),e.jsxs(ne,{children:[e.jsx(C,{variant:"contained",startIcon:e.jsx(s,{icon:"eva:cloud-upload-fill"}),onClick:k,children:"Upload"}),!!u.length&&e.jsx(C,{variant:"outlined",color:"inherit",onClick:F,children:"Remove all"}),(r||h)&&e.jsx(c,{direction:"row",justifyContent:"flex-end",flexGrow:1,children:e.jsx(C,{variant:"soft",onClick:r||h,children:h?"Save":"Create"})})]})]})}se.propTypes={folderName:o.string,onChangeFolderName:o.func,onClose:o.func,onCreate:o.func,onUpdate:o.func,open:o.bool,title:o.string};function ke({folder:n,selected:a,onSelect:x,onDelete:r,sx:h,...p}){var E,i;const{enqueueSnackbar:v}=je(),{copy:f}=fe(),[u,b]=d.useState(""),[I,k]=d.useState(n.name),j=y(),F=y(),g=y(),t=H(),m=y(),T=y(),D=y(n.isFavorited),A=d.useCallback(l=>{b(l.target.value)},[]),R=d.useCallback(l=>{k(l.target.value)},[]),z=d.useCallback(()=>{v("Copied!"),f(n.url)},[f,v,n.url]),W=e.jsxs(c,{direction:"row",alignItems:"center",sx:{top:8,right:8,position:"absolute"},children:[e.jsx(U,{color:"warning",icon:e.jsx(s,{icon:"eva:star-outline"}),checkedIcon:e.jsx(s,{icon:"eva:star-fill"}),checked:D.value,onChange:D.onToggle}),e.jsx(P,{color:t.open?"inherit":"default",onClick:t.onOpen,children:e.jsx(s,{icon:"eva:more-vertical-fill"})})]}),O=(F.value||a)&&x?e.jsx(U,{size:"medium",checked:a,onClick:x,icon:e.jsx(s,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(s,{icon:"eva:checkmark-circle-2-fill"}),sx:{p:.75}}):e.jsx(w,{component:"img",src:"/assets/icons/files/ic_folder.svg",sx:{width:36,height:36}}),M=e.jsx(Q,{onClick:T.onTrue,primary:n.name,secondary:e.jsxs(e.Fragment,{children:[_(n.size),e.jsx(w,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),n.totalFiles," files"]}),primaryTypographyProps:{noWrap:!0,typography:"subtitle1"},secondaryTypographyProps:{mt:.5,component:"span",alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}),N=e.jsx(ye,{max:3,sx:{[`& .${ge.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(E=n.shared)==null?void 0:E.map(l=>e.jsx(K,{alt:l.name,src:l.avatarUrl},l.id))});return e.jsxs(e.Fragment,{children:[e.jsxs(c,{component:ve,variant:"outlined",spacing:1,alignItems:"flex-start",sx:{p:2.5,maxWidth:222,borderRadius:2,bgcolor:"unset",cursor:"pointer",position:"relative",...(F.value||a)&&{bgcolor:"background.paper",boxShadow:l=>l.customShadows.z20},...h},...p,children:[e.jsx(w,{onMouseEnter:F.onTrue,onMouseLeave:F.onFalse,children:O}),W,M,!!((i=n==null?void 0:n.shared)!=null&&i.length)&&N]}),e.jsxs(X,{open:t.open,onClose:t.onClose,arrow:"right-top",sx:{width:160},children:[e.jsxs(S,{onClick:()=>{t.onClose(),z()},children:[e.jsx(s,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(S,{onClick:()=>{t.onClose(),g.onTrue()},children:[e.jsx(s,{icon:"solar:share-bold"}),"Share"]}),e.jsxs(S,{onClick:()=>{t.onClose(),j.onTrue()},children:[e.jsx(s,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(S,{onClick:()=>{m.onTrue(),t.onClose()},sx:{color:"error.main"},children:[e.jsx(s,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(oe,{item:n,favorited:D.value,onFavorite:D.onToggle,onCopyLink:z,open:T.value,onClose:T.onFalse,onDelete:()=>{T.onFalse(),r()}}),e.jsx($,{open:g.value,shared:n.shared,inviteEmail:u,onChangeInvite:A,onCopyLink:z,onClose:()=>{g.onFalse(),b("")}}),e.jsx(se,{open:j.value,onClose:j.onFalse,title:"Edit Folder",onUpdate:()=>{j.onFalse(),k(I),console.info("UPDATE FOLDER",I)},folderName:I,onChangeFolderName:R}),e.jsx(Ce,{open:m.value,onClose:m.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(C,{variant:"contained",color:"error",onClick:r,children:"Delete"})})]})}ke.propTypes={folder:o.object,onDelete:o.func,onSelect:o.func,selected:o.bool,sx:o.object};export{oe as F,$ as a,we as b,ke as c,se as d};
