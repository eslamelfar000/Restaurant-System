import{eF as oe,bc as ie,eG as le,ba as ce,eH as de,bu as ue,eg as pe,eI as me,eJ as xe,af as fe,bi as ge,bj as he,ef as je,bl as be,bk as ve,cG as F,cH as O,aY as _e,aA as ye,aB as k,eK as we,r as w,aC as Ce,aL as Q,j as e,aD as Se,h as B,E as K,B as C,eB as Te,T as D,dR as Ie,G as ke,ay as U,n as Re,S as P,c as S,aM as H,cc as Pe,eL as Le,az as Fe,aN as Y,aE as Ee,cv as Ne,P as c,aO as $,aP as M,aQ as L,aR as X,aS as q,cI as De,aK as Z,l as Ae,C as Oe,p as V,bV as $e,aG as Me,a2 as qe,c3 as ee,A as ze,ad as Ge,N as Be,I as A,c4 as Ue,Q as W,O as He,$ as Ve}from"./index-186823c6.js";import{C as We}from"./custom-breadcrumbs-cb6ff524.js";import{G as E}from"./Grid2-7caff2c6.js";import{D as Je}from"./DateTimePicker-b4007f5b.js";import{g as Qe,C as Ke}from"./confirm-dialog-9f045afc.js";import{D as Ye}from"./DialogTitle-6701e5d8.js";import{D as Xe}from"./DialogContent-1dbacd97.js";import{D as Ze}from"./DialogActions-ac373084.js";import{T as et}from"./table-pagination-custom-8894986b.js";import{T as R}from"./TablePagination-86f68a57.js";function tt(n,t){return()=>null}function at(n,t){return()=>null}function st(n,t,o,d,s){return null}const nt={configure:n=>{oe.configure(n)}},rt=Object.freeze(Object.defineProperty({__proto__:null,capitalize:ie,createChainedFunction:le,createSvgIcon:ce,debounce:de,deprecatedPropType:tt,isMuiElement:ue,ownerDocument:pe,ownerWindow:me,requirePropFactory:at,setRef:xe,unstable_ClassNameGenerator:nt,unstable_useEnhancedEffect:fe,unstable_useId:ge,unsupportedProp:st,useControlled:he,useEventCallback:je,useForkRef:be,useIsFocusVisible:ve},Symbol.toStringTag,{value:"Module"}));function te({currentUser:n}){const{t}=F(),o=JSON.parse(localStorage.getItem("settings")),d=window.localStorage.getItem("user_data"),s=O(d),p=_e(),f=ye().shape({title:k().required(t("note-form.title")),status:k().required(t("note-form.status")),avatarUrl:k().required(t("note-form.image")),desc:k().required(t("note-form.desc")),date_time:we().when("status",(a,r)=>a==="pending"?r.required(t("note-form.date-time")):r.notRequired())}),_=w.useMemo(()=>({avatarUrl:"",title:"",status:"",desc:"",date_time:new Date("0000-00-00T00:00:00")||""}),[]),m=Ce({resolver:Ee(f),defaultValues:_}),{reset:g,watch:b,control:x,setValue:l,handleSubmit:i,formState:{errors:y}}=m,u=b(),v=[{value:"send_now",label:t("send-now")},{value:"pending",label:t("pending")}],[h,T]=w.useState(null),j=w.useCallback(a=>{const r=a[0];Object.assign(r,{preview:URL.createObjectURL(r)}),r&&r.type.startsWith("image/")&&T(r)},[]);w.useEffect(()=>{h&&l("avatarUrl",h,{shouldValidate:!0})},[l,h]);const{mutate:I,error:ht,isError:jt,isLoading:G}=Q({mutationFn:a=>$.post(`${M}dashboard/restaurant/notification/create`,a,{headers:{"Content-Type":"multipart/form-data","Accept-Language":L.language,Authorization:`Bearer ${s==null?void 0:s.token}`}}),onSuccess:()=>{X(t("note-form.success.create")),p("/dashboard/notifications/list"),g()},onError:()=>{q(t("error"))}}),re=a=>{const r=new FormData;r.append("title",a==null?void 0:a.title),r.append("message",a==null?void 0:a.desc),h instanceof File&&r.append("photo",h),r.append("status",a==null?void 0:a.status),(a==null?void 0:a.status)==="pending"&&r.append("sent_at",Ne(a==null?void 0:a.date_time,"yyyy-MM-dd HH:mm:ss")),I(r)};return e.jsx(Se,{methods:m,onSubmit:i(re),children:e.jsxs(E,{container:!0,spacing:3,children:[e.jsx(E,{xs:12,md:4,children:e.jsxs(B,{sx:{pt:10,pb:5,px:3},children:[n&&e.jsx(K,{color:u.status==="active"&&"success"||u.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:u.status==="active"?t("active"):t("not-active")}),e.jsx(C,{sx:{mb:5},children:e.jsx(Te,{name:"avatarUrl",maxSize:3145728,onDrop:j,helperText:e.jsxs(D,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," max size of ",Ie(3145728)]})})}),n&&e.jsx(ke,{labelPlacement:"start",control:e.jsx(U,{name:"status",control:x,render:({field:a})=>e.jsx(Re,{...a,checked:a.value!=="active",onChange:r=>a.onChange(r.target.checked?"banned":"active")})}),label:e.jsx(e.Fragment,{children:e.jsx(D,{variant:"subtitle2",sx:{mb:.5},children:t("status")})}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between",alignItems:"center"}}),n&&e.jsx(P,{justifyContent:"center",alignItems:"center",sx:{mt:3},children:e.jsx(S,{variant:"soft",color:"error",children:t("del-note")})})]})}),e.jsx(E,{xs:12,md:8,children:e.jsxs(B,{sx:{p:3},children:[e.jsxs(C,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(H,{name:"title",label:t("title")}),e.jsxs(Pe,{native:!0,name:"status",label:t("status"),InputLabelProps:{shrink:!0},children:[e.jsx("option",{value:"",hidden:!0,children:t("select-status")}),v.map((a,r)=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),(u==null?void 0:u.status)==="pending"&&e.jsx(C,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)"},sx:{mt:2},children:e.jsx(U,{control:x,name:"date_time",render:({field:a})=>e.jsxs(e.Fragment,{children:[e.jsx(Je,{label:t("date-time"),...a,error:!!y.date_time,minDate:Le(new Date,{days:1}),defaultValue:new Date}),y.date_time&&e.jsx(Fe,{sx:{mt:-2,color:"#e84f30"},children:t("note-form.date-time")})]})})}),e.jsx(C,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)"},sx:{mt:2},children:e.jsx(H,{rows:4,multiline:!0,name:"desc",label:t("note-details")})}),e.jsx(P,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:e.jsx(S,{type:"submit",variant:"contained",disabled:!!G,children:G?e.jsx(Y,{color:(o==null?void 0:o.themeMode)==="dark"?"#161C24":"#ffffff",size:23}):t("creat-note")})})]})})]})})}te.propTypes={currentUser:c.object};const Rt=[{value:"send_now",label:"تم الارسال"},{value:"pending",label:"انتظار"}],Pt=[{value:"send_now",label:"Send Successfully"},{value:"pending",label:"Pending"}];function ot(){var b,x,l,i,y,u,v,h,T;const n=window.localStorage.getItem("user_data"),t=O(n),[o,d]=w.useState(1),{data:s,isLoading:p,refetch:f}=De(["notes",o,L.language],{queryFn:()=>$.get(`${M}dashboard/restaurant/notification?per_page=10&page=${o}`,{headers:{"Content-Type":"application/json","Accept-Language":L.language,Authorization:`Bearer ${t==null?void 0:t.token}`}}),onSuccess:j=>{},onError:()=>{q(Z("error"))}}),_=(j,I)=>{d(I)},m=((b=s==null?void 0:s.data)==null?void 0:b.data.map((j,I)=>({id:j.id,title:j.title,avatarUrl:j.photo||"https://api-dev-minimal-v510.vercel.app/assets/images/avatar/avatar_3.jpg",desc:j.message||"Sublime Text is a sophisticated text editor for code, markup, and prose. You ll love the slick",time:j.sent_at,status:j.status,loading:p})))||[],g=s?[{current_page:((l=(x=s.data)==null?void 0:x.pagination)==null?void 0:l.current_page)||1,per_page:((y=(i=s.data)==null?void 0:i.pagination)==null?void 0:y.per_page)||5,last_page:((v=(u=s.data)==null?void 0:u.pagination)==null?void 0:v.last_page)||1,total:((T=(h=s.data)==null?void 0:h.pagination)==null?void 0:T.total)||5}]:[];return{_noteList:m,notesListPagination:g,handlePageChange:_,refetch:f}}function it({id:n}){const t=Ae(),{_noteList:o}=ot(),{t:d}=F(),s=o.find(p=>p.id===n);return e.jsxs(Oe,{maxWidth:t.themeStretch?!1:"lg",children:[e.jsx(We,{heading:`${d("edit")} - ${s.title}`,links:[{name:d("dashboard"),href:V.dashboard.root},{name:d("notifications"),href:V.dashboard.notifications.root},{name:s==null?void 0:s.title}],sx:{mb:{xs:3,md:5}}}),e.jsx(te,{currentUser:s})]})}it.propTypes={id:c.string};var z={},ae={exports:{}};(function(n){function t(o){return o&&o.__esModule?o:{default:o}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(ae);var lt=ae.exports,N={};const ct=$e(rt);var J;function dt(){return J||(J=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=ct}(N)),N}var ut=lt;Object.defineProperty(z,"__esModule",{value:!0});var se=z.default=void 0,pt=ut(dt()),mt=e,xt=(0,pt.default)((0,mt.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeft");se=z.default=xt;function ne({title:n,content:t,action:o,open:d,meal:s,onClose:p,note_id:f,..._}){const{t:m}=F(),g=JSON.parse(localStorage.getItem("settings")),{refetch:b}=Qe(),x=window.localStorage.getItem("user_data"),l=O(x),{mutate:i,error:y,isError:u,isLoading:v}=Q({mutationFn:()=>$.post(`${M}dashboard/restaurant/notification/send`,{id:f},{headers:{"Content-Type":"multipart/form-data","Accept-Language":L.language,Authorization:`Bearer ${l==null?void 0:l.token}`}}),onSuccess:()=>{X(m("note-form.success.")),p(),b()},onError:()=>{q(m("error"))}});return e.jsxs(Me,{fullWidth:!0,maxWidth:"xs",open:d,onClose:p,..._,children:[e.jsx(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(Ye,{sx:{pb:2,fontSize:"22px !important"},children:n})}),t&&e.jsxs(Xe,{sx:{typography:"body2",overflow:"hidden",fontSize:"17px"},children:[" ",t," "]}),e.jsxs(Ze,{children:[e.jsx(S,{type:"submit",variant:"contained",color:"success",disabled:!!v,onClick:i,children:v?e.jsx(Y,{color:(g==null?void 0:g.themeMode)==="dark"?"#161C24":"#ffffff",size:23}):m("resend")}),e.jsx(S,{variant:"outlined",color:"inherit",onClick:p,children:m("cancel")})]})]})}ne.propTypes={action:c.node,content:c.node,onClose:c.func,open:c.bool,title:c.string};function ft({row:n,selected:t,onEditRow:o,onSelectRow:d,onDeleteRow:s}){const{avatarUrl:p,status:f,title:_,desc:m,id:g,time:b}=n,x=qe(),l=ee(),{t:i}=F(),[y,u]=w.useState(!1),v=()=>{u(!0)},h=()=>{u(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(et,{hover:!0,selected:t,children:[e.jsx(R,{children:e.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ze,{alt:_,src:p,sx:{mr:2,width:50,height:50}}),e.jsxs(C,{children:[e.jsx(Ge,{primary:_,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}}),e.jsx(D,{children:b?`( ${b} )`:""})]})]})}),e.jsx(R,{sx:{width:"400px",whiteSpace:"normal",wordWrap:"break-word"},children:e.jsx("p",{children:m})}),e.jsx(R,{children:e.jsx(K,{variant:"soft",color:f==="send_now"&&"success"||f==="pending"&&"warning"||"default",children:i(f==="send_now"?"sent-success":"pending")})}),e.jsx(R,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:e.jsx(Be,{color:l.open?"inherit":"default",onClick:l.onOpen,children:e.jsx(A,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(Ue,{open:l.open,onClose:l.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(W,{onClick:()=>{x.onTrue(),l.onClose()},sx:{color:"error.main"},children:[e.jsx(A,{icon:"solar:trash-bin-trash-bold"}),i("delete")]}),f==="send_now"&&e.jsxs(W,{onClick:()=>{v(),l.onClose()},children:[e.jsx(se,{}),i("resend-note")]})]}),e.jsx(Ke,{open:x.value,onClose:x.onFalse,item_id:g,title:i("delete"),content:i("del-note-question"),action:e.jsx(S,{variant:"contained",color:"error",onClick:s,children:i("delete")})}),e.jsx(ne,{open:y,onClose:h,note_id:g,title:i("resend"),content:i("resend-note-question"),action:e.jsx(S,{variant:"contained",color:"error",onClick:s,children:i("resend")})})]})}ft.propTypes={onDeleteRow:c.func,onEditRow:c.func,onSelectRow:c.func,row:c.object,selected:c.bool};function gt({filters:n,onFilters:t,roleOptions:o}){ee();const d=w.useCallback(s=>{t("title",s.target.value)},[t]);return w.useCallback(s=>{t("role",typeof s.target.value=="string"?s.target.value.split(","):s.target.value)},[t]),e.jsx(e.Fragment,{children:e.jsx(P,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2,md:2}},children:e.jsx(P,{direction:"row",alignItems:"center",spacing:0,flexGrow:1,sx:{width:1},children:e.jsx(He,{fullWidth:!0,value:n.name,onChange:d,placeholder:`${Z("search")}...`,InputProps:{startAdornment:e.jsx(Ve,{position:"start",children:e.jsx(A,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})})})}gt.propTypes={filters:c.object,onFilters:c.func,roleOptions:c.array};export{Rt as A,gt as N,Pt as U,ft as a,te as b,it as c,ot as g};
