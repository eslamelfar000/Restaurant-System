import{cG as O,l as W,aT as H,a2 as q,r as d,ap as _,p as C,j as e,C as G,c as k,R as V,I as $,h as J,i as K,e as M,k as Q,E as X,eE as Y,aw as Z,B as E,T as R,W as ee}from"./index-b75d89b7.js";import{N as te,a as se}from"./notification-note-bar-8f8587ab.js";import{a as oe,b as ae,c as ne,C as le}from"./confirm-dialog-828f7f39.js";import{C as ie}from"./custom-breadcrumbs-e6b049c1.js";import{u as re}from"./use-table-de5651d8.js";import{a as de,b as ce}from"./table-pagination-custom-1b83dca1.js";import{T as he}from"./table-skeleton-c792b5a4.js";import{f as pe}from"./profile-followers-6f8b83d2.js";import{T as me,a as ue,b as xe}from"./TableContainer-9e7fa76c.js";import{P as ge}from"./Pagination-b39c9aa0.js";import"./Grid2-48a6fac6.js";import"./DateTimePicker-6a134baf.js";import"./useMobilePicker-53ff5d8f.js";import"./DialogContent-1ddd6058.js";import"./dialogTitleClasses-943c24de.js";import"./DialogActions-f928fe7e.js";import"./ListItem-f489cdb5.js";import"./ListItemSecondaryAction-87b62efe.js";import"./MobileDateTimePicker-73781989.js";import"./DialogTitle-e7e9a75c.js";import"./TablePagination-25decbb4.js";import"./FirstPage-4c8ad69b.js";import"./empty-content-f57219ae.js";import"./Skeleton-7eb700e1.js";import"./Alert-84cccd9d.js";import"./LoadingButton-b9462ef2.js";import"./CircularProgress-a777ecab.js";import"./Rating-5653d21d.js";import"./CardHeader-ee8f33db.js";import"./AvatarGroup-9deec4d5.js";import"./Fab-dc56f109.js";import"./lightbox-c39c69f9.js";function fe(){var F,P,y,L;const{t:o,currentLang:p}=O(),{_noteList:l,notesListPagination:c,handlePageChange:m,isLoading:u}=oe(),i=[{value:"all",label:o("all")},...p.value==="ar"?ae:ne],B=[{id:"title",label:o("title"),width:250},{id:"desc",label:o("desc"),width:150},{id:"status",label:o("status"),width:100},{id:"",width:88}],f={title:"",role:[],status:"all"},s=re(),N=W(),T=H(),j=q(),[a,b]=d.useState(l||[]);d.useEffect(()=>{_(l,a)||b(l)},[l]);const[h,v]=d.useState(f),r=je({inputData:a,filters:h}),x=r.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage);s.dense;const S=!_(f,h);!r.length&&S||r.length;const g=d.useCallback((t,n)=>{s.onResetPage(),v(w=>({...w,[t]:n}))},[s]),I=d.useCallback(t=>{const n=a.filter(w=>w.id!==t);b(n),s.onUpdatePageDeleteRow(x.length)},[x.length,s,a]),A=d.useCallback(()=>{const t=a.filter(n=>!s.selected.includes(n.id));b(t),s.onUpdatePageDeleteRows({totalRows:a.length,totalRowsInPage:x.length,totalRowsFiltered:r.length})},[r.length,x.length,s,a]),D=d.useCallback(t=>{T.push(C.dashboard.notifications.edit(t))},[T]),U=d.useCallback((t,n)=>{g("status",n)},[g]),z=d.useCallback(()=>{v(f)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{maxWidth:N.themeStretch?!1:"lg",children:[e.jsx(ie,{heading:o("notifications"),links:[{name:o("dashboard"),href:C.dashboard.root},{name:o("notifications")}],action:e.jsx(k,{component:V,href:C.dashboard.notifications.new,variant:"contained",startIcon:e.jsx($,{icon:"mingcute:add-line"}),children:o("new-note")}),sx:{mb:{xs:3,md:5}}}),e.jsxs(J,{children:[e.jsx(K,{value:h.status,onChange:U,sx:{px:2.5,boxShadow:t=>`inset 0 -2px 0 0 ${M(t.palette.grey[500],.08)}`},children:i==null?void 0:i.map(t=>e.jsx(Q,{iconPosition:(p==null?void 0:p.value)==="ar"?"start":"end",value:t.value,label:t.label,icon:e.jsxs(X,{variant:(t.value==="all"||t.value===h.status)&&"filled"||"soft",color:t.value==="send_now"&&"success"||t.value==="pending"&&"warning"||"default",children:[t.value==="all"&&l.length,t.value==="send_now"&&l.filter(n=>n.status==="send_now").length,t.value==="pending"&&l.filter(n=>n.status==="pending").length]})},t.value))}),e.jsx(te,{filters:h,onFilters:g,roleOptions:Y}),S&&e.jsx(pe,{filters:h,onFilters:g,onResetFilters:z,results:r.length,sx:{p:2.5,pt:0}}),e.jsx(me,{sx:{position:"relative",overflow:"unset"},children:e.jsx(Z,{children:e.jsxs(ue,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(de,{order:s.order,orderBy:s.orderBy,headLabel:B,rowCount:a.length,numSelected:s.selected.length,onSort:s.onSort}),e.jsx(xe,{children:u?e.jsx(he,{}):e.jsx(e.Fragment,{children:a.length!==0?e.jsx(e.Fragment,{children:r==null?void 0:r.map(t=>e.jsx(se,{row:t,onSelectRow:()=>s.onSelectRow(t.id),onDeleteRow:()=>I(t.id),onEditRow:()=>D(t.id)},t.id))}):e.jsx(e.Fragment,{children:e.jsx(ce,{notFound:(a==null?void 0:a.length)>0})})})})]})})}),e.jsxs(E,{sx:{padding:"20px 15px",borderTop:"1px dashed gray",display:"flex",justifyContent:"space-between"},children:[e.jsxs(E,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(R,{sx:{fontSize:"18px"},children:(F=c[0])==null?void 0:F.current_page}),e.jsx(R,{sx:{fontSize:"19px",m:"0px 5px"},children:" / "}),e.jsx(R,{sx:{fontSize:"20px"},children:(P=c[0])==null?void 0:P.last_page})]}),e.jsx(ge,{shape:"rounded",onChange:m,count:((y=c[0])==null?void 0:y.last_page)||1,page:((L=c[0])==null?void 0:L.current_page)||1,siblingCount:0})]})]})]}),e.jsx(le,{open:j.value,onClose:j.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(k,{variant:"contained",color:"error",onClick:()=>{A(),j.onFalse()},children:"Delete"})})]})}function je({inputData:o,comparator:p,filters:l}){const{title:c,status:m,role:u}=l;return c&&(o=o.filter(i=>i.title.toLowerCase().indexOf(c.toLowerCase())!==-1)),m!=="all"&&(o=o.filter(i=>i.status===m)),u.length&&(o=o.filter(i=>u.includes(i.role))),o}function Xe(){return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx("title",{children:" Dashboard: Notifications List"})}),e.jsx(fe,{})]})}export{Xe as default};
