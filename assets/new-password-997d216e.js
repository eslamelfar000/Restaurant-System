import{aN as L,aO as T,aR as E,a4 as H,aC as N,aD as r,aP as s,aU as V,aE as $,p,r as B,j as e,S as x,aQ as i,aS as O,a1 as f,Q as w,I as l,aG as Q,T as c,L as j,R as W,aV as z,aF as D,aH as G,W as U}from"./index-3843fe70.js";import{a as J}from"./use-countdown-93c97daf.js";function K(){const{newPassword:t,forgotPassword:n}=L(),g=T(),y=E().get("email"),a=H(),{countdown:b,counting:d,startCountdown:m}=J(60),v=N().shape({code:r().required(s("auth-form.code")).min(6,s("auth-form.valid-code")),email:r().required(s("auth-form.email")).email(s("auth-form.valid-email")),password:r().required(s("auth-form.new-password")).min(6,s("auth-form.valid-password")),confirmPassword:r().required(s("auth-form.confirm-new-password")).oneOf([V("password")],s("auth-form.pass-match"))}),P={code:"",email:y||"",password:"",confirmPassword:""},u=$({mode:"onChange",resolver:G(v),defaultValues:P}),{watch:C,handleSubmit:S,formState:{isSubmitting:I}}=u,h=C(),k=S(async o=>{try{await(t==null?void 0:t(o.email,o.code,o.password)),g.push(p.auth.amplify.login)}catch(q){console.error(q)}}),F=B.useCallback(async()=>{try{m(),await(n==null?void 0:n(h.email))}catch(o){console.error(o)}},[n,m,h.email]),R=e.jsxs(x,{spacing:3,alignItems:"center",children:[e.jsx(i,{name:"email",label:s("email"),placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),e.jsx(O,{name:"code"}),e.jsx(i,{name:"password",label:s("password"),type:a.value?"text":"password",InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(w,{onClick:a.onToggle,edge:"end",children:e.jsx(l,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(i,{name:"confirmPassword",label:s("confirm-new-password"),type:a.value?"text":"password",InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(w,{onClick:a.onToggle,edge:"end",children:e.jsx(l,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(Q,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:I,children:s("send")}),e.jsxs(c,{variant:"body2",children:[e.jsxs("span",{children:[s("dont-have-code")," "]}),e.jsxs(j,{variant:"subtitle2",onClick:F,sx:{cursor:"pointer",...d&&{color:"text.disabled",pointerEvents:"none"}},children:[s("resend")," ",d&&`(${b}s)`]})]}),e.jsxs(j,{component:W,href:p.auth.amplify.login,color:"inherit",variant:"subtitle2",sx:{alignItems:"center",display:"inline-flex"},children:[e.jsx(l,{icon:"eva:arrow-ios-back-fill",width:16}),s("return-to")," ",s("sign-in")]})]}),A=e.jsxs(e.Fragment,{children:[e.jsx(z,{sx:{height:96}}),e.jsxs(x,{spacing:1,sx:{my:5},children:[e.jsx(c,{variant:"h3",children:s("success-request")}),e.jsxs(c,{variant:"body2",sx:{color:"text.secondary"},children:[s("pass-change-situations.first"),e.jsx("br",{}),s("pass-change-situations.last")]})]})]});return e.jsxs(D,{methods:u,onSubmit:k,children:[A,R]})}function Z(){return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsx("title",{children:" Amplify: New Password"})}),e.jsx(K,{})]})}export{Z as default};
