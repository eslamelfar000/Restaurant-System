import{cG as N,l as H,aT as W,a2 as q,r,ap as G,p,j as e,C as M,c as E,R as V,I as $,h as J,i as K,e as Q,k as X,E as Y,eE as Z,aw as ee,B as U,T}from"./index-e8afd095.js";import{g as se,A as ae,U as te,C as le}from"./confirm-dialog-264b9cb5.js";import{C as ne}from"./custom-breadcrumbs-c41d8ef9.js";import{u as oe,e as re}from"./use-table-042d0a53.js";import{a as ie,c as de,d as ce}from"./table-pagination-custom-e7ce1833.js";import{T as he}from"./table-skeleton-8d68450f.js";import{e as ue,f as ge,g as me}from"./profile-followers-bebbfa97.js";import{T as xe,a as pe,b as fe}from"./TableContainer-2fe030c6.js";import{P as be}from"./Pagination-2c7b5dd7.js";function Ee(){var S,P,F,y;const{t,currentLang:h}=N(),{_mealList:o,mealListPaginationb:i,handlePageChange:g}=se(),d=[{value:"all",label:t("all")},...h.value==="ar"?ae:te],_=[{id:"name",label:t("name"),width:100},{id:"desc",label:t("desc"),width:150},{id:"review",label:t("review"),width:150},{id:"status",label:t("status"),width:100},{id:"",width:88}],f={name:"",role:[],status:"all"},a=oe(),k=H(),R=W(),b=q(),[l,j]=r.useState(o||[]);r.useEffect(()=>{j(o)},[o,l]);const[u,C]=r.useState(f),c=je({inputData:l,filters:u}),m=c.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage),B=a.dense?52:72,v=!G(f,u),I=!c.length&&v||!c.length,x=r.useCallback((s,n)=>{a.onResetPage(),C(w=>({...w,[s]:n}))},[a]),L=r.useCallback(s=>{const n=l.filter(w=>w.id!==s);j(n),a.onUpdatePageDeleteRow(m.length)},[m.length,a,l]),A=r.useCallback(()=>{const s=l.filter(n=>!a.selected.includes(n.id));j(s),a.onUpdatePageDeleteRows({totalRows:l.length,totalRowsInPage:m.length,totalRowsFiltered:c.length})},[c.length,m.length,a,l]),O=r.useCallback(s=>{R.push(p.dashboard.meal.edit(s))},[R]),D=r.useCallback((s,n)=>{x("status",n)},[x]),z=r.useCallback(()=>{C(f)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(M,{maxWidth:k.themeStretch?!1:"lg",children:[e.jsx(ne,{heading:t("meal-list"),links:[{name:t("dashboard"),href:p.dashboard.root},{name:t("meal"),href:p.dashboard.meal.root},{name:t("meal-list")}],action:e.jsx(E,{component:V,href:p.dashboard.meal.new,variant:"contained",startIcon:e.jsx($,{icon:"mingcute:add-line"}),children:t("new-meal")}),sx:{mb:{xs:3,md:5}}}),e.jsxs(J,{children:[e.jsx(K,{value:u.status,onChange:D,sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${Q(s.palette.grey[500],.08)}`},children:d.map(s=>e.jsx(X,{iconPosition:(h==null?void 0:h.value)==="ar"?"start":"end",value:s.value,label:s.label,icon:e.jsxs(Y,{variant:(s.value==="all"||s.value===u.status)&&"filled"||"soft",color:s.value==="active"&&"success"||s.value==="banned"&&"error"||"default",children:[s.value==="all"&&o.length,s.value==="active"&&o.filter(n=>n.status==="active").length,s.value==="banned"&&o.filter(n=>n.status==="banned").length]})},s.value))}),e.jsx(ue,{filters:u,onFilters:x,roleOptions:Z}),v&&e.jsx(ge,{filters:u,onFilters:x,onResetFilters:z,results:c.length,sx:{p:2.5,pt:0}}),e.jsx(xe,{sx:{position:"relative",overflow:"unset"},children:e.jsx(ee,{children:e.jsxs(pe,{size:a.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ie,{order:a.order,orderBy:a.orderBy,headLabel:_,rowCount:l.length,numSelected:a.selected.length,onSort:a.onSort}),e.jsx(fe,{children:l.loading||l.length===0?e.jsx(he,{}):e.jsx(e.Fragment,{children:l!=null?e.jsx(e.Fragment,{children:c.map(s=>e.jsx(me,{row:s,onSelectRow:()=>a.onSelectRow(s.id),onDeleteRow:()=>L(s.id),onEditRow:()=>O(s.id)},s.id))}):e.jsxs(e.Fragment,{children:[e.jsx(de,{height:B,emptyRows:re(a.page,a.rowsPerPage,l.length)}),e.jsx(ce,{notFound:I})]})})})]})})}),e.jsxs(U,{sx:{padding:"20px 15px",borderTop:"1px dashed gray",display:"flex",justifyContent:"space-between"},children:[e.jsxs(U,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{sx:{fontSize:"18px"},children:(S=i[0])==null?void 0:S.current_page}),e.jsx(T,{sx:{fontSize:"19px",m:"0px 5px"},children:" / "}),e.jsx(T,{sx:{fontSize:"20px"},children:(P=i[0])==null?void 0:P.last_page})]}),e.jsx(be,{shape:"rounded",onChange:g,count:(F=i[0])==null?void 0:F.last_page,page:((y=i[0])==null?void 0:y.current_page)||1,siblingCount:0})]})]})]}),e.jsx(le,{open:b.value,onClose:b.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",a.selected.length," "]})," items?"]}),action:e.jsx(E,{variant:"contained",color:"error",onClick:()=>{A(),b.onFalse()},children:"Delete"})})]})}function je({inputData:t,filters:h}){const{name:o,status:i,role:g}=h;return o&&(t=t.filter(d=>d.name.toLowerCase().indexOf(o.toLowerCase())!==-1)),i!=="all"&&(t=t.filter(d=>d.status===i)),g.length&&(t=t.filter(d=>g.includes(d.role))),t}export{Ee as U};
