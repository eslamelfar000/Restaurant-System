import{cG as H,l as N,aT as W,a2 as q,r as d,ap as G,p,j as e,C as M,c as E,R as V,I as $,h as J,i as K,e as Q,k as X,E as Y,eE as Z,aw as ee,B as k,T as R}from"./index-30829889.js";import{g as se,A as ae,U as te,C as le}from"./confirm-dialog-a06252b6.js";import{C as ne}from"./custom-breadcrumbs-f701f934.js";import{u as oe,e as re}from"./use-table-ab7fc22e.js";import{a as ie,c as de,d as ce}from"./table-pagination-custom-c6d546f4.js";import{T as he}from"./table-skeleton-94846bde.js";import{e as ue,f as ge,g as me}from"./profile-followers-8e047142.js";import{T as xe,a as pe,b as fe}from"./TableContainer-97ee71fb.js";import{P as be}from"./Pagination-8025f4d5.js";function Ee(){var S,P,F,y;const{t,currentLang:h}=H(),{_mealList:o,mealListPaginationb:c,handlePageChange:g}=se(),r=[{value:"all",label:t("all")},...h.value==="ar"?ae:te],B=[{id:"name",label:t("name"),width:100},{id:"desc",label:t("desc"),width:150},{id:"review",label:t("review"),width:150},{id:"status",label:t("status"),width:100},{id:"",width:88}],f={name:"",role:[],status:"all"},a=oe(),L=N(),C=W(),b=q(),[l,j]=d.useState(o||[]);d.useEffect(()=>{j(o)},[o,l]);const[u,v]=d.useState(f),i=je({inputData:l,filters:u}),m=i.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage),U=a.dense?52:72,T=!G(f,u),_=!i.length&&T||!i.length,x=d.useCallback((s,n)=>{a.onResetPage(),v(w=>({...w,[s]:n}))},[a]),I=d.useCallback(s=>{const n=l.filter(w=>w.id!==s);j(n),a.onUpdatePageDeleteRow(m.length)},[m.length,a,l]),A=d.useCallback(()=>{const s=l.filter(n=>!a.selected.includes(n.id));j(s),a.onUpdatePageDeleteRows({totalRows:l.length,totalRowsInPage:m.length,totalRowsFiltered:i.length})},[i.length,m.length,a,l]),D=d.useCallback(s=>{C.push(p.dashboard.meal.edit(s))},[C]),z=d.useCallback((s,n)=>{x("status",n)},[x]),O=d.useCallback(()=>{v(f)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(M,{maxWidth:L.themeStretch?!1:"lg",children:[e.jsx(ne,{heading:t("meal-list"),links:[{name:t("dashboard"),href:p.dashboard.root},{name:t("meal"),href:p.dashboard.meal.root},{name:t("meal-list")}],action:e.jsx(E,{component:V,href:p.dashboard.meal.new,variant:"contained",startIcon:e.jsx($,{icon:"mingcute:add-line"}),children:t("new-meal")}),sx:{mb:{xs:3,md:5}}}),e.jsxs(J,{children:[e.jsx(K,{value:u.status,onChange:z,sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${Q(s.palette.grey[500],.08)}`},children:r==null?void 0:r.map(s=>e.jsx(X,{iconPosition:(h==null?void 0:h.value)==="ar"?"start":"end",value:s.value,label:s.label,icon:e.jsxs(Y,{variant:(s.value==="all"||s.value===u.status)&&"filled"||"soft",color:s.value==="active"&&"success"||s.value==="banned"&&"error"||"default",children:[s.value==="all"&&o.length,s.value==="active"&&o.filter(n=>n.status==="active").length,s.value==="banned"&&o.filter(n=>n.status==="banned").length]})},s.value))}),e.jsx(ue,{filters:u,onFilters:x,roleOptions:Z}),T&&e.jsx(ge,{filters:u,onFilters:x,onResetFilters:O,results:i.length,sx:{p:2.5,pt:0}}),e.jsx(xe,{sx:{position:"relative",overflow:"unset"},children:e.jsx(ee,{children:e.jsxs(pe,{size:a.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ie,{order:a.order,orderBy:a.orderBy,headLabel:B,rowCount:l.length,numSelected:a.selected.length,onSort:a.onSort}),e.jsx(fe,{children:l.loading?e.jsx(he,{}):e.jsx(e.Fragment,{children:l.length!==0?e.jsx(e.Fragment,{children:i==null?void 0:i.map(s=>e.jsx(me,{row:s,onSelectRow:()=>a.onSelectRow(s.id),onDeleteRow:()=>I(s.id),onEditRow:()=>D(s.id)},s.id))}):e.jsxs(e.Fragment,{children:[e.jsx(de,{height:U,emptyRows:re(a.page,a.rowsPerPage,l.length)}),e.jsx(ce,{notFound:_})]})})})]})})}),e.jsxs(k,{sx:{padding:"20px 15px",borderTop:"1px dashed gray",display:"flex",justifyContent:"space-between"},children:[e.jsxs(k,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(R,{sx:{fontSize:"18px"},children:(S=c[0])==null?void 0:S.current_page}),e.jsx(R,{sx:{fontSize:"19px",m:"0px 5px"},children:" / "}),e.jsx(R,{sx:{fontSize:"20px"},children:(P=c[0])==null?void 0:P.last_page})]}),e.jsx(be,{shape:"rounded",onChange:g,count:(F=c[0])==null?void 0:F.last_page,page:((y=c[0])==null?void 0:y.current_page)||1,siblingCount:0})]})]})]}),e.jsx(le,{open:b.value,onClose:b.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",a.selected.length," "]})," items?"]}),action:e.jsx(E,{variant:"contained",color:"error",onClick:()=>{A(),b.onFalse()},children:"Delete"})})]})}function je({inputData:t,filters:h}){const{name:o,status:c,role:g}=h;return o&&(t=t.filter(r=>r.name.toLowerCase().indexOf(o.toLowerCase())!==-1)),c!=="all"&&(t=t.filter(r=>r.status===c)),g.length&&(t=t.filter(r=>g.includes(r.role))),t}export{Ee as U};
