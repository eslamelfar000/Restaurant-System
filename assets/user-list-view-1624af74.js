import{cG as A,eC as B,eA as I,l as L,aT as O,a2 as _,r as d,ez as p,ap as D,p as b,j as a,C as N,c as j,R as z,I as H,h as W,i as q,e as G,k as V,E as $,eD as J,aw as K}from"./index-8dd84c3c.js";import{C as M}from"./confirm-dialog-0fc86c40.js";import{C as Q}from"./custom-breadcrumbs-4f91a7ea.js";import{u as X,g as Y,e as Z}from"./use-table-bd8eaaef.js";import{a as ee,c as se,d as ae,e as te}from"./table-pagination-custom-bcf5e1a2.js";import{e as le,f as oe,g as ne}from"./profile-followers-29dce76b.js";import{T as re,a as ie,b as de}from"./TableContainer-e2589cf7.js";function be(){const{t,currentLang:c}=A(),f=[{value:"all",label:t("all")},...c.value==="ar"?B:I],g=[{id:"name",label:t("name"),width:100},{id:"desc",label:t("desc"),width:150},{id:"review",label:t("review"),width:150},{id:"status",label:t("status"),width:100},{id:"",width:88}],h={name:"",role:[],status:"all"},e=X(),m=L(),l=O(),r=_(),[o,R]=d.useState(p),[u,C]=d.useState(h),i=ce({inputData:o,comparator:Y(e.order,e.orderBy),filters:u}),w=i.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),v=e.dense?52:72,T=!D(h,u),S=!i.length&&T||!i.length,x=d.useCallback((s,n)=>{e.onResetPage(),C(P=>({...P,[s]:n}))},[e]),F=d.useCallback(s=>{const n=o.filter(P=>P.id!==s);R(n),e.onUpdatePageDeleteRow(w.length)},[w.length,e,o]),y=d.useCallback(()=>{const s=o.filter(n=>!e.selected.includes(n.id));R(s),e.onUpdatePageDeleteRows({totalRows:o.length,totalRowsInPage:w.length,totalRowsFiltered:i.length})},[i.length,w.length,e,o]),U=d.useCallback(s=>{l.push(b.dashboard.meal.edit(s))},[l]),k=d.useCallback((s,n)=>{x("status",n)},[x]),E=d.useCallback(()=>{C(h)},[]);return a.jsxs(a.Fragment,{children:[a.jsxs(N,{maxWidth:m.themeStretch?!1:"lg",children:[a.jsx(Q,{heading:t("meal-list"),links:[{name:t("dashboard"),href:b.dashboard.root},{name:t("meal"),href:b.dashboard.meal.root},{name:t("meal-list")}],action:a.jsx(j,{component:z,href:b.dashboard.meal.new,variant:"contained",startIcon:a.jsx(H,{icon:"mingcute:add-line"}),children:t("new-meal")}),sx:{mb:{xs:3,md:5}}}),a.jsxs(W,{children:[a.jsx(q,{value:u.status,onChange:k,sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${G(s.palette.grey[500],.08)}`},children:f.map(s=>a.jsx(V,{iconPosition:(c==null?void 0:c.value)==="ar"?"start":"end",value:s.value,label:s.label,icon:a.jsxs($,{variant:(s.value==="all"||s.value===u.status)&&"filled"||"soft",color:s.value==="active"&&"success"||s.value==="banned"&&"error"||"default",children:[s.value==="all"&&p.length,s.value==="active"&&p.filter(n=>n.status==="active").length,s.value==="banned"&&p.filter(n=>n.status==="banned").length]})},s.value))}),a.jsx(le,{filters:u,onFilters:x,roleOptions:J}),T&&a.jsx(oe,{filters:u,onFilters:x,onResetFilters:E,results:i.length,sx:{p:2.5,pt:0}}),a.jsx(re,{sx:{position:"relative",overflow:"unset"},children:a.jsx(K,{children:a.jsxs(ie,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[a.jsx(ee,{order:e.order,orderBy:e.orderBy,headLabel:g,rowCount:o.length,numSelected:e.selected.length,onSort:e.onSort}),a.jsxs(de,{children:[i.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(s=>a.jsx(ne,{row:s,onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>F(s.id),onEditRow:()=>U(s.id)},s.id)),a.jsx(se,{height:v,emptyRows:Z(e.page,e.rowsPerPage,o.length)}),a.jsx(ae,{notFound:S})]})]})})}),a.jsx(te,{count:i.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage})]})]}),a.jsx(M,{open:r.value,onClose:r.onFalse,title:"Delete",content:a.jsxs(a.Fragment,{children:["Are you sure want to delete ",a.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:a.jsx(j,{variant:"contained",color:"error",onClick:()=>{y(),r.onFalse()},children:"Delete"})})]})}function ce({inputData:t,comparator:c,filters:f}){const{name:g,status:h,role:e}=f,m=t.map((l,r)=>[l,r]);return m.sort((l,r)=>{const o=c(l[0],r[0]);return o!==0?o:l[1]-r[1]}),t=m.map(l=>l[0]),g&&(t=t.filter(l=>l.name.toLowerCase().indexOf(g.toLowerCase())!==-1)),h!=="all"&&(t=t.filter(l=>l.status===h)),e.length&&(t=t.filter(l=>e.includes(l.role))),t}export{be as U};
