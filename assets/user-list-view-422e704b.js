import{ct as I,ep as E,en as O,l as L,aO as _,a4 as D,r as d,em as w,ar as N,p as b,j as a,C as H,c as T,R as q,I as S,h as z,i as W,e as Q,k as V,F as $,eq as G,ca as J,Q as K,ay as M}from"./index-3843fe70.js";import{C as X}from"./confirm-dialog-49a5d6b9.js";import{C as Y}from"./custom-breadcrumbs-299772e9.js";import{u as Z,g as ee,e as se}from"./use-table-1d27b01f.js";import{b as ae,a as te,c as le,d as oe,e as ne}from"./table-pagination-custom-4e7e71cc.js";import{e as re,f as ie,g as de}from"./profile-followers-2c746c64.js";import{T as ce,a as he,b as ue}from"./TableContainer-9732a5de.js";function Pe(){const{t,currentLang:c}=I(),f=[{value:"all",label:t("all")},...c.value==="ar"?E:O],g=[{id:"name",label:t("name"),width:100},{id:"price",label:t("price"),width:150},{id:"status",label:t("status"),width:100},{id:"",width:88}],h={name:"",role:[],status:"all"},e=Z(),m=L(),l=_(),r=D(),[n,P]=d.useState(w),[u,C]=d.useState(h),i=ge({inputData:n,comparator:ee(e.order,e.orderBy),filters:u}),x=i.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),v=e.dense?52:72,j=!N(h,u),F=!i.length&&j||!i.length,p=d.useCallback((s,o)=>{e.onResetPage(),C(R=>({...R,[s]:o}))},[e]),y=d.useCallback(s=>{const o=n.filter(R=>R.id!==s);P(o),e.onUpdatePageDeleteRow(x.length)},[x.length,e,n]),A=d.useCallback(()=>{const s=n.filter(o=>!e.selected.includes(o.id));P(s),e.onUpdatePageDeleteRows({totalRows:n.length,totalRowsInPage:x.length,totalRowsFiltered:i.length})},[i.length,x.length,e,n]),k=d.useCallback(s=>{l.push(b.dashboard.meal.edit(s))},[l]),U=d.useCallback((s,o)=>{p("status",o)},[p]),B=d.useCallback(()=>{C(h)},[]);return a.jsxs(a.Fragment,{children:[a.jsxs(H,{maxWidth:m.themeStretch?!1:"lg",children:[a.jsx(Y,{heading:t("meal-list"),links:[{name:t("dashboard"),href:b.dashboard.root},{name:t("meal"),href:b.dashboard.meal.root},{name:t("meal-list")}],action:a.jsx(T,{component:q,href:b.dashboard.meal.new,variant:"contained",startIcon:a.jsx(S,{icon:"mingcute:add-line"}),children:t("new-meal")}),sx:{mb:{xs:3,md:5}}}),a.jsxs(z,{children:[a.jsx(W,{value:u.status,onChange:U,sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${Q(s.palette.grey[500],.08)}`},children:f.map(s=>a.jsx(V,{iconPosition:(c==null?void 0:c.value)==="ar"?"start":"end",value:s.value,label:s.label,icon:a.jsxs($,{variant:(s.value==="all"||s.value===u.status)&&"filled"||"soft",color:s.value==="active"&&"success"||s.value==="banned"&&"error"||"default",children:[s.value==="all"&&w.length,s.value==="active"&&w.filter(o=>o.status==="active").length,s.value==="banned"&&w.filter(o=>o.status==="banned").length]})},s.value))}),a.jsx(re,{filters:u,onFilters:p,roleOptions:G}),j&&a.jsx(ie,{filters:u,onFilters:p,onResetFilters:B,results:i.length,sx:{p:2.5,pt:0}}),a.jsxs(ce,{sx:{position:"relative",overflow:"unset"},children:[a.jsx(ae,{dense:e.dense,numSelected:e.selected.length,rowCount:n.length,onSelectAllRows:s=>e.onSelectAllRows(s,n.map(o=>o.id)),action:a.jsx(J,{title:"Delete",children:a.jsx(K,{color:"primary",onClick:r.onTrue,children:a.jsx(S,{icon:"solar:trash-bin-trash-bold"})})})}),a.jsx(M,{children:a.jsxs(he,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[a.jsx(te,{order:e.order,orderBy:e.orderBy,headLabel:g,rowCount:n.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:s=>e.onSelectAllRows(s,n.map(o=>o.id))}),a.jsxs(ue,{children:[i.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(s=>a.jsx(de,{row:s,selected:e.selected.includes(s.id),onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>y(s.id),onEditRow:()=>k(s.id)},s.id)),a.jsx(le,{height:v,emptyRows:se(e.page,e.rowsPerPage,n.length)}),a.jsx(oe,{notFound:F})]})]})})]}),a.jsx(ne,{count:i.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage})]})]}),a.jsx(X,{open:r.value,onClose:r.onFalse,title:"Delete",content:a.jsxs(a.Fragment,{children:["Are you sure want to delete ",a.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:a.jsx(T,{variant:"contained",color:"error",onClick:()=>{A(),r.onFalse()},children:"Delete"})})]})}function ge({inputData:t,comparator:c,filters:f}){const{name:g,status:h,role:e}=f,m=t.map((l,r)=>[l,r]);return m.sort((l,r)=>{const n=c(l[0],r[0]);return n!==0?n:l[1]-r[1]}),t=m.map(l=>l[0]),g&&(t=t.filter(l=>l.name.toLowerCase().indexOf(g.toLowerCase())!==-1)),h!=="all"&&(t=t.filter(l=>l.status===h)),e.length&&(t=t.filter(l=>e.includes(l.role))),t}export{Pe as U};
