import{aT as q,cG as y,c8 as V,aA as $,aB as h,r as C,aC as H,p as w,j as e,aD as M,h as T,E as I,B as v,ey as O,T as S,dP as z,G as W,ay as J,n as Q,S as R,c as L,aM as k,cc as _,aE as K,P as r,l as X,eJ as Y,C as Z,a2 as F,c3 as U,A as ee,ad as ae,N as te,I as P,c4 as se,Q as oe}from"./index-8dd84c3c.js";import{C as ne}from"./custom-breadcrumbs-4f91a7ea.js";import{G as g}from"./Grid2-c538f224.js";import{L as ie}from"./LoadingButton-4fef03e5.js";import{C as le}from"./confirm-dialog-0fc86c40.js";import{T as re}from"./table-pagination-custom-bcf5e1a2.js";import{T as u}from"./TablePagination-4ce568dd.js";function A({currentUser:a}){const d=q(),{t}=y(),{enqueueSnackbar:n}=V(),p=$().shape({title:h().required(t("note-form.title")),status:h().required(t("note-form.status")),avatarUrl:h().required(t("note-form.image")),desc:h().required(t("note-form.desc"))}),j=C.useMemo(()=>({avatarUrl:(a==null?void 0:a.avatarUrl)||"",title:(a==null?void 0:a.title)||"",status:(a==null?void 0:a.status)||"",price:(a==null?void 0:a.price)||"",desc:(a==null?void 0:a.desc)||""}),[a]),c=H({resolver:K(p),defaultValues:j}),{reset:m,watch:b,control:x,setValue:i,handleSubmit:l,formState:{isSubmitting:B}}=c,f=b(),E=l(async s=>{try{await new Promise(o=>setTimeout(o,500)),m(),n(t(a?"note-form.success.update":"note-form.success.create")),d.push(w.dashboard.user.list),console.info("DATA",s)}catch(o){console.error(o)}}),G=C.useCallback(s=>{const o=s[0],N=Object.assign(o,{preview:URL.createObjectURL(o)});o&&i("avatarUrl",N,{shouldValidate:!0})},[i]),D=[{value:"active",label:t("active")},{value:"banned",label:t("not-active")}];return e.jsx(M,{methods:c,onSubmit:E,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{xs:12,md:4,children:e.jsxs(T,{sx:{pt:10,pb:5,px:3},children:[a&&e.jsx(I,{color:f.status==="active"&&"success"||f.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:f.status==="active"?t("active"):t("not-active")}),e.jsx(v,{sx:{mb:5},children:e.jsx(O,{name:"avatarUrl",maxSize:3145728,onDrop:G,helperText:e.jsxs(S,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," max size of ",z(3145728)]})})}),a&&e.jsx(W,{labelPlacement:"start",control:e.jsx(J,{name:"status",control:x,render:({field:s})=>e.jsx(Q,{...s,checked:s.value!=="active",onChange:o=>s.onChange(o.target.checked?"banned":"active")})}),label:e.jsx(e.Fragment,{children:e.jsx(S,{variant:"subtitle2",sx:{mb:.5},children:t("status")})}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between",alignItems:"center"}}),a&&e.jsx(R,{justifyContent:"center",alignItems:"center",sx:{mt:3},children:e.jsx(L,{variant:"soft",color:"error",children:t("del-note")})})]})}),e.jsx(g,{xs:12,md:8,children:e.jsxs(T,{sx:{p:3},children:[e.jsxs(v,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(k,{name:"title",label:t("title")}),e.jsxs(_,{native:!0,name:"status",label:t("status"),InputLabelProps:{shrink:!0},children:[e.jsx("option",{value:"",hidden:!0,children:t("select-status")}),D.map((s,o)=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsx(v,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)"},sx:{mt:2},children:e.jsx(k,{rows:4,multiline:!0,name:"desc",label:t("note-details")})}),e.jsx(R,{alignItems:"flex-end",sx:{mt:3},children:e.jsx(ie,{type:"submit",variant:"contained",loading:B,children:t(a?"save-changes":"creat-note")})})]})})]})})}A.propTypes={currentUser:r.object};function ce({id:a}){const d=X(),{t}=y(),n=Y.find(p=>p.id===a);return e.jsxs(Z,{maxWidth:d.themeStretch?!1:"lg",children:[e.jsx(ne,{heading:`${t("edit")} - ${n.title}`,links:[{name:t("dashboard"),href:w.dashboard.root},{name:t("notifications"),href:w.dashboard.notifications.root},{name:n==null?void 0:n.title}],sx:{mb:{xs:3,md:5}}}),e.jsx(A,{currentUser:n})]})}ce.propTypes={id:r.string};function de({row:a,selected:d,onEditRow:t,onSelectRow:n,onDeleteRow:p}){const{avatarUrl:j,status:c,title:m,desc:b}=a,x=F();F();const i=U(),{t:l}=y();return e.jsxs(e.Fragment,{children:[e.jsxs(re,{hover:!0,selected:d,children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{alt:m,src:j,sx:{mr:2,width:50,height:50}}),e.jsx(ae,{primary:m,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(u,{sx:{width:"400px",whiteSpace:"normal",wordWrap:"break-word"},children:e.jsx("p",{children:b})}),e.jsx(u,{children:e.jsx(I,{variant:"soft",color:c==="active"&&"success"||c==="banned"&&"error"||"default",children:l(c==="active"?"active":"not-active")})}),e.jsx(u,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:e.jsx(te,{color:i.open?"inherit":"default",onClick:i.onOpen,children:e.jsx(P,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(se,{open:i.open,onClose:i.onClose,arrow:"right-top",sx:{width:140},children:e.jsxs(oe,{onClick:()=>{x.onTrue(),i.onClose()},sx:{color:"error.main"},children:[e.jsx(P,{icon:"solar:trash-bin-trash-bold"}),l("delete")]})}),e.jsx(le,{open:x.value,onClose:x.onFalse,title:l("delete"),content:l("del-note-question"),action:e.jsx(L,{variant:"contained",color:"error",onClick:p,children:l("delete")})})]})}de.propTypes={onDeleteRow:r.func,onEditRow:r.func,onSelectRow:r.func,row:r.object,selected:r.bool};export{de as N,A as a,ce as b};
