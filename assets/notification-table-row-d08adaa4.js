import{aT as q,cG as C,c8 as V,aA as $,aB as u,r as y,aC as H,p as w,j as e,aD as M,h as T,E as P,B as v,ey as O,T as k,dP as z,G as W,ay as K,n as Q,S,c as L,aM as R,cc as _,aE as J,P as r,l as X,eI as Y,C as Z,a2 as F,c3 as U,K as ee,A as ae,ad as te,N as se,I,c4 as oe,Q as ne}from"./index-075f0922.js";import{C as ie}from"./custom-breadcrumbs-a1aae47e.js";import{G as g}from"./Grid2-45406380.js";import{L as le}from"./LoadingButton-b69562a9.js";import{C as re}from"./confirm-dialog-4719a7e1.js";import{T as ce}from"./table-pagination-custom-6c13802b.js";import{T as m}from"./TablePagination-c508d92b.js";function A({currentUser:a}){const c=q(),{t}=C(),{enqueueSnackbar:n}=V(),x=$().shape({title:u().required(t("note-form.title")),status:u().required(t("note-form.status")),avatarUrl:u().required(t("note-form.image")),desc:u().required(t("note-form.desc"))}),j=y.useMemo(()=>({avatarUrl:(a==null?void 0:a.avatarUrl)||"",title:(a==null?void 0:a.title)||"",status:(a==null?void 0:a.status)||"",price:(a==null?void 0:a.price)||"",desc:(a==null?void 0:a.desc)||""}),[a]),d=H({resolver:J(x),defaultValues:j}),{reset:h,watch:b,control:p,setValue:i,handleSubmit:l,formState:{isSubmitting:B}}=d,f=b(),E=l(async s=>{try{await new Promise(o=>setTimeout(o,500)),h(),n(t(a?"note-form.success.update":"note-form.success.create")),c.push(w.dashboard.user.list),console.info("DATA",s)}catch(o){console.error(o)}}),G=y.useCallback(s=>{const o=s[0],N=Object.assign(o,{preview:URL.createObjectURL(o)});o&&i("avatarUrl",N,{shouldValidate:!0})},[i]),D=[{value:"active",label:t("active")},{value:"banned",label:t("not-active")}];return e.jsx(M,{methods:d,onSubmit:E,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{xs:12,md:4,children:e.jsxs(T,{sx:{pt:10,pb:5,px:3},children:[a&&e.jsx(P,{color:f.status==="active"&&"success"||f.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:f.status==="active"?t("active"):t("not-active")}),e.jsx(v,{sx:{mb:5},children:e.jsx(O,{name:"avatarUrl",maxSize:3145728,onDrop:G,helperText:e.jsxs(k,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," max size of ",z(3145728)]})})}),a&&e.jsx(W,{labelPlacement:"start",control:e.jsx(K,{name:"status",control:p,render:({field:s})=>e.jsx(Q,{...s,checked:s.value!=="active",onChange:o=>s.onChange(o.target.checked?"banned":"active")})}),label:e.jsx(e.Fragment,{children:e.jsx(k,{variant:"subtitle2",sx:{mb:.5},children:t("status")})}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between",alignItems:"center"}}),a&&e.jsx(S,{justifyContent:"center",alignItems:"center",sx:{mt:3},children:e.jsx(L,{variant:"soft",color:"error",children:t("del-note")})})]})}),e.jsx(g,{xs:12,md:8,children:e.jsxs(T,{sx:{p:3},children:[e.jsxs(v,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(R,{name:"title",label:t("title")}),e.jsxs(_,{native:!0,name:"status",label:t("status"),InputLabelProps:{shrink:!0},children:[e.jsx("option",{value:"",hidden:!0,children:t("select-status")}),D.map((s,o)=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsx(v,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)"},sx:{mt:2},children:e.jsx(R,{rows:4,multiline:!0,name:"desc",label:t("note-details")})}),e.jsx(S,{alignItems:"flex-end",sx:{mt:3},children:e.jsx(le,{type:"submit",variant:"contained",loading:B,children:t(a?"save-changes":"creat-note")})})]})})]})})}A.propTypes={currentUser:r.object};function de({id:a}){const c=X(),{t}=C(),n=Y.find(x=>x.id===a);return e.jsxs(Z,{maxWidth:c.themeStretch?!1:"lg",children:[e.jsx(ie,{heading:`${t("edit")} - ${n.title}`,links:[{name:t("dashboard"),href:w.dashboard.root},{name:t("notifications"),href:w.dashboard.notifications.root},{name:n==null?void 0:n.title}],sx:{mb:{xs:3,md:5}}}),e.jsx(A,{currentUser:n})]})}de.propTypes={id:r.string};function xe({row:a,selected:c,onEditRow:t,onSelectRow:n,onDeleteRow:x}){const{avatarUrl:j,status:d,title:h,desc:b}=a,p=F();F();const i=U(),{t:l}=C();return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{hover:!0,selected:c,children:[e.jsx(m,{padding:"checkbox",children:e.jsx(ee,{checked:c,onClick:n})}),e.jsxs(m,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ae,{alt:h,src:j,sx:{mr:2,width:50,height:50}}),e.jsx(te,{primary:h,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(m,{sx:{width:"400px",whiteSpace:"normal",wordWrap:"break-word"},children:e.jsx("p",{children:b})}),e.jsx(m,{children:e.jsx(P,{variant:"soft",color:d==="active"&&"success"||d==="banned"&&"error"||"default",children:l(d==="active"?"active":"not-active")})}),e.jsx(m,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:e.jsx(se,{color:i.open?"inherit":"default",onClick:i.onOpen,children:e.jsx(I,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(oe,{open:i.open,onClose:i.onClose,arrow:"right-top",sx:{width:140},children:e.jsxs(ne,{onClick:()=>{p.onTrue(),i.onClose()},sx:{color:"error.main"},children:[e.jsx(I,{icon:"solar:trash-bin-trash-bold"}),l("delete")]})}),e.jsx(re,{open:p.value,onClose:p.onFalse,title:l("delete"),content:l("del-note-question"),action:e.jsx(L,{variant:"contained",color:"error",onClick:x,children:l("delete")})})]})}xe.propTypes={onDeleteRow:r.func,onEditRow:r.func,onSelectRow:r.func,row:r.object,selected:r.bool};export{xe as N,A as a,de as b};
