import{bw as Z,bx as J,s as K,r as S,bg as Q,bh as ee,bd as g,af as te,bl as se,j as P,bn as ne,bX as T,bY as oe,bZ as w,b_ as v,b$ as re,c0 as F}from"./index-11464dee.js";import{c as ie}from"./clsx-1229b3e0.js";function ae(e){return Z("MuiMasonry",e)}J("MuiMasonry",["root"]);const ce=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],d=e=>Number(e.replace("px","")),le={flexBasis:"100%",width:0,margin:0,padding:0},ue=e=>{const{classes:n}=e;return ne({root:["root"]},ae,n)},de=({ownerState:e,theme:n})=>{let r={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const l={};if(e.isSSR){const s={},t=d(n.spacing(e.defaultSpacing));for(let o=1;o<=e.defaultColumns;o+=1)s[`&:nth-of-type(${e.defaultColumns}n+${o%e.defaultColumns})`]={order:o};return l.height=e.defaultHeight,l.margin=-(t/2),l["& > *"]=g({},r["& > *"],s,{margin:t/2,width:`calc(${(100/e.defaultColumns).toFixed(2)}% - ${t}px)`}),g({},r,l)}const i=T({values:e.spacing,breakpoints:n.breakpoints.values}),h=oe(n);r=w(r,v({theme:n},i,s=>{let t;if(typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"){const o=Number(s);t=F(h,o)}else t=s;return g({margin:`calc(0px - (${t} / 2))`,"& > *":{margin:`calc(${t} / 2)`}},e.maxColumnHeight&&{height:typeof t=="number"?Math.ceil(e.maxColumnHeight+d(t)):`calc(${e.maxColumnHeight}px + ${t})`})}));const a=T({values:e.columns,breakpoints:n.breakpoints.values});return r=w(r,v({theme:n},a,s=>{const o=`${(100/Number(s)).toFixed(2)}%`,b=typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"?F(h,Number(i)):"0px";return{"& > *":{width:`calc(${o} - ${b})`}}})),typeof i=="object"&&(r=w(r,v({theme:n},i,(s,t)=>{if(t){const o=Number(s),b=Object.keys(a).pop(),u=F(h,o);return{"& > *":{width:`calc(${`${(100/(typeof a=="object"?a[t]||a[b]:a)).toFixed(2)}%`} - ${u})`}}}return null}))),r},me=K("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(e,n)=>[n.root]})(de),fe=S.forwardRef(function(n,r){const l=Q({props:n,name:"MuiMasonry"}),{children:i,className:h,component:E="div",columns:a=4,spacing:R=1,defaultColumns:s,defaultHeight:t,defaultSpacing:o}=l,b=ee(l,ce),u=S.useRef(),[k,H]=S.useState(),B=!k&&t&&s!==void 0&&o!==void 0,[_,U]=S.useState(B?s-1:0),O=g({},l,{spacing:R,columns:a,maxColumnHeight:k,defaultColumns:s,defaultHeight:t,defaultSpacing:o,isSSR:B}),W=ue(O),A=m=>{if(!u.current||!m||m.length===0)return;const c=u.current,x=u.current.firstChild,j=c.clientWidth,V=x.clientWidth;if(j===0||V===0)return;const z=window.getComputedStyle(x),q=d(z.marginLeft),G=d(z.marginRight),$=Math.round(j/(V+q+G)),C=new Array($).fill(0);let y=!1;c.childNodes.forEach(f=>{if(f.nodeType!==Node.ELEMENT_NODE||f.dataset.class==="line-break"||y)return;const M=window.getComputedStyle(f),X=d(M.marginTop),Y=d(M.marginBottom),L=d(M.height)?Math.ceil(d(M.height))+X+Y:0;if(L===0){y=!0;return}for(let p=0;p<f.childNodes.length;p+=1){const N=f.childNodes[p];if(N.tagName==="IMG"&&N.clientHeight===0){y=!0;break}}if(!y){const p=C.indexOf(Math.min(...C));C[p]+=L;const N=p+1;f.style.order=N}}),y||re.flushSync(()=>{H(Math.max(...C)),U($>0?$-1:0)})};te(()=>{if(typeof ResizeObserver>"u")return;let m;const c=new ResizeObserver(()=>{m=window.requestAnimationFrame(A)});return u.current&&u.current.childNodes.forEach(x=>{c.observe(x)}),()=>{m&&window.cancelAnimationFrame(m),c&&c.disconnect()}},[a,R,i]);const D=se(r,u),I=new Array(_).fill("").map((m,c)=>P.jsx("span",{"data-class":"line-break",style:g({},le,{order:c+1})},c));return P.jsxs(me,g({as:E,className:ie(W.root,h),ref:D,ownerState:O},b,{children:[i,I]}))}),he=fe;export{he as M};
