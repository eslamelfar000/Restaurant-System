import{l as F,cH as P,cI as g,aQ as o,r as q,j as e,C as I,aK as s,dp as L,T as u,aO as c,aP as p,aS as d,W as O}from"./index-b75d89b7.js";import{A as x}from"./analytics-widget-summary-8e2f9bdd.js";import{B as W}from"./booking-available-dc6feb5b.js";import{B as G}from"./banking-recent-transitions-af6107fa.js";import{G as l}from"./Grid2-48a6fac6.js";import{P as Q}from"./Pagination-b39c9aa0.js";import"./CircularProgress-a777ecab.js";import"./sumBy-e3d80c0f.js";import"./_baseIteratee-3a5640d5.js";import"./_baseToString-a4bd2219.js";import"./_baseSum-340d39f5.js";import"./chart-6e765aa0.js";import"./CardHeader-ee8f33db.js";import"./table-pagination-custom-1b83dca1.js";import"./empty-content-f57219ae.js";import"./TablePagination-25decbb4.js";import"./FirstPage-4c8ad69b.js";import"./table-skeleton-c792b5a4.js";import"./Skeleton-7eb700e1.js";import"./TableContainer-9e7fa76c.js";import"./Rating-5653d21d.js";function H(){var b,A,S,C;const f=F(),$=window.localStorage.getItem("user_data"),n=P($),m=JSON.parse(localStorage.getItem("settings")),{data:h,isLoading:v,refetch:J}=g(["review",o.language],{queryFn:()=>c.get(`${p}dashboard/restaurant/review`,{headers:{"Content-Type":"application/json","Accept-Language":o.language,Authorization:`Bearer ${n==null?void 0:n.token}`}}),onSuccess:a=>{},onError:()=>{d(s("error"))},select:a=>{var r;return(r=a==null?void 0:a.data)==null?void 0:r.data}}),{data:j,isLoading:w}=g(["clients",o.language],{queryFn:()=>c.get(`${p}dashboard/restaurant/clients`,{headers:{"Content-Type":"application/json","Accept-Language":o.language,Authorization:`Bearer ${n==null?void 0:n.token}`}}),onSuccess:a=>{},onError:()=>{d(s("error"))},select:a=>{var r;return(r=a==null?void 0:a.data)==null?void 0:r.data}}),{data:y,isLoading:B}=g(["review-count",o.language],{queryFn:()=>c.get(`${p}dashboard/restaurant/review-count`,{headers:{"Content-Type":"application/json","Accept-Language":o.language,Authorization:`Bearer ${n==null?void 0:n.token}`}}),onSuccess:a=>{},onError:()=>{d(s("error"))},select:a=>{var r;return(r=a==null?void 0:a.data)==null?void 0:r.data}}),{data:i,isLoading:k}=g(["subscription",o.language],{queryFn:()=>c.get(`${p}dashboard/restaurant/subscription-stats`,{headers:{"Content-Type":"application/json","Accept-Language":o.language,Authorization:`Bearer ${n==null?void 0:n.token}`}}),onSuccess:a=>{},onError:()=>{d(s("error"))},select:a=>{var r;return(r=a==null?void 0:a.data)==null?void 0:r.data}}),[_,z]=q.useState(1),{data:t,isLoading:T}=g(["food-reviews",_,o.language],{queryFn:()=>c.get(`${p}dashboard/restaurant/food-rating?per_page=10&page=${_}`,{headers:{"Content-Type":"application/json","Accept-Language":o.language,Authorization:`Bearer ${n==null?void 0:n.token}`}}),onSuccess:a=>{},onError:()=>{d(s("error"))},select:a=>a==null?void 0:a.data}),E=(a,r)=>{z(r)};return e.jsx(I,{maxWidth:f.themeStretch?!1:"xl",children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{xs:12,sm:6,md:4,children:e.jsx(x,{title:s("stats-lang.customer"),total:j??0,color:"info",loading:w,loadingColor:"info",icon:e.jsx("img",{alt:"icon",src:"/assets/icons/glass/ic_glass_users.png"})})}),e.jsx(l,{xs:12,sm:6,md:4,children:e.jsx(x,{title:s("stats-lang.items-review"),total:y??0,loading:B,color:"warning",loadingColor:"warning",icon:e.jsx("img",{alt:"icon",src:"/assets/icons/glass/ic_glass_buy.png"})})}),e.jsx(l,{xs:12,sm:6,md:4,children:e.jsx(x,{title:s("stats-lang.res-review"),total:h??0,color:"error",icon:e.jsx("img",{alt:"icon",src:"/assets/icons/glass/ic_glass_message.png"}),loading:v})}),e.jsx(l,{xs:12,md:4,children:e.jsx(W,{title:s("stats-lang.subscription"),chart:{series:[{label:s("stats-lang.remain-time"),value:(i==null?void 0:i.remaining_time)!=null?i==null?void 0:i.remaining_time:0},{label:s("stats-lang.spent-time"),value:(i==null?void 0:i.time_spent)!=null?i==null?void 0:i.time_spent:0}]},loading:k})}),e.jsxs(l,{xs:12,md:8,children:[e.jsx(G,{title:s("stats-lang.meal-review"),tableData:t==null?void 0:t.data,loading:T,tableLabels:[{id:"name",label:s("name")},{id:"date",label:s("review")},{id:"amount",label:s("price")}]}),e.jsxs(L,{sx:{padding:"20px 15px",borderTop:"1px dashed gray",display:"flex",justifyContent:"space-between",backgroundColor:(m==null?void 0:m.themeMode)==="dark"?"grey.800":"grey.200",borderRadius:"0px 0px 16px 16px"},children:[e.jsxs(L,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(u,{sx:{fontSize:"18px"},children:(b=t==null?void 0:t.pagination)==null?void 0:b.current_page}),e.jsx(u,{sx:{fontSize:"19px",m:"0px 5px"},children:" / "}),e.jsx(u,{sx:{fontSize:"20px"},children:(A=t==null?void 0:t.pagination)==null?void 0:A.last_page})]}),e.jsx(Q,{shape:"rounded",size:"small",onChange:E,count:((S=t==null?void 0:t.pagination)==null?void 0:S.last_page)||1,page:((C=t==null?void 0:t.pagination)==null?void 0:C.current_page)||1,siblingCount:0})]})]})]})})}function pe(){return e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx("title",{children:" Dashboard: App"})}),e.jsx(H,{})]})}export{pe as default};
